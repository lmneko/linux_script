## sed Usage

SED 是一个非交互式文本编辑器，它可对文本文件和标准输入进行编辑，标准输入可以来自键盘输入、文本重定向、字符串、变量，甚至来自于管道的文本，与 VIM 编辑器类似，它一次处理一行内容，Sed 可以编辑一个或多个文件，简化对文件的反复操作、编写转换程序等。
在处理文本时把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），紧接着用 SED 命令处理缓冲区中的内容，处理完成后把缓冲区的内容输出至屏幕或者写入文件。
逐行处理直到文件末尾，然而如果打印在屏幕上，实质文件内容并没有改变，除非你使用重定向存储输出或者写入文件。其语法参数格式为：

```bash
sed [-Options] ['Commands'] fileanme;
```

sed 工具默认处理文本，文本内容输出屏幕已经修改，但是文件内容其实没有修改，需要加-i 参数即对文件彻底修改;

| 参数               | 功能                                     |
| ------------------ | ---------------------------------------- |
| x                  | x为指定行号                              |
| x,y                | 指定从x到y的行号范围                     |
| /pattern/          | 查询包含模式的行                         |
| /pattern/pattern1/ | 查询包含两个模式的行                     |
| /pattern/,x        | 从与pattern的匹配行到x号行之间的行       |
| x,/pattern/        | 从x号行到与pattern的匹配行之间的行       |
| x,y!               | 查询不包括x和y行号的行                   |
| r                  | 从另一个文件中读取文件                   |
| w                  | 将文本写入到一个文件                     |
| y                  | 变换字符                                 |
| q                  | 将第一个匹配模式完成后退出               |
| l                  | 显示与八进制ASCII码等价的控制字符        |
| {}                 | 在定位行执行的命令组                     |
| p                  | 打印匹配行                               |
| =                  | 打印文件行号                             |
| a\                 | 在定位行号之后追加文本信息               |
| i\                 | 在定位行号之前插入文本信息               |
| d                  | 删除定位行                               |
| c\                 | 用新文本替换定位文本                     |
| s                  | 用替换模式替换相应文本                   |
| n                  | 读取输入的下一行，用下一个命令处理新的行 |
| N                  | 将当前读入行的下一行读取到当前的模式空间 |
| h                  | 将模式缓冲区的文本复制到保持缓冲区       |
| H                  | 将模式缓冲区的内容复制到模式缓冲区       |
| x                  | 互换模式缓冲区和保持缓冲区的内容         |
| g                  | 将保持缓冲区的内容复制到模式缓冲区       |
| G                  | 将保持缓冲区的内容追加到模式缓冲区       |
|                    |                                          |



常用 SED 工具企业演练案列：
（1） 替换 jfedu.txt 文本中 old 为 new：

```bash
sed 's/old/new/g' jfedu.txt``
```

（2） 打印 jfedu.txt 文本第一行至第三行：

```bash
sed -n '1,3p' jfedu.txt
```

（3） 打印 jfedu.txt 文本中第一行与最后一行：

```bash
bashsed -n '1p;$p' jfedu.txt
```

（4） 删除 jfedu.txt 第一行至第三行、删除匹配行至最后一行：

```bash
sed '1,3d' jfedu.txt
sed '/jfedu/,$d' jfedu.txt
```

（5） 删除 jfedu.txt 最后 6 行及删除最后一行：

```bash
 for i in `seq 1 6`;do sed -i '$d' jfedu.txt ;done

sed '$d' jfedu.txt
```

（6） 删除 jfedu.txt 最后 6 行：

```bash
sed '$d' jfedu.txt
```

